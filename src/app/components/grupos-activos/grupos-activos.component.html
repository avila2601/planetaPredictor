<div class="tabla-container">
  <table>
    <tr>
      <th>Nombre</th>
      <th>Torneo</th>
      <th>Posición</th>
      <th>Puntaje</th>
      <th>Pronósticos</th>
      <th>Tabla de<br>posiciones</th>
      <th>Administrar</th>
    </tr>

    <!-- 🔥 Mostrar solo las pollas del usuario -->
    <tr *ngFor="let polla of pollas$ | async">
      <td>{{ polla.name }}</td>
      <td>{{ polla.torneo }}</td>
      <td class="posicion-cell">{{ getPosicion(polla.id) }}</td>
      <td>{{ getPuntajePolla(polla.id) }}</td>
      <td><a (click)="irAPronosticos(polla)" role="button" aria-label="Ver pronósticos">🔮</a></td>
      <td><a (click)="irAPosiciones(polla)" role="button" aria-label="Ver posiciones">📈</a></td>
      <td><a (click)="irAAdministrar(polla)" role="button" aria-label="Administrar">⚙️</a></td>
    </tr>
  </table>

  <!-- 🔥 Si el usuario no tiene pollas, mostrar mensaje -->
  <ng-container *ngIf="(pollas$ | async)?.length === 0">
    <p>No estás registrado en ninguna polla.</p>
  </ng-container>

  <!-- Botón para abrir el modal -->
  <div class="crear-polla-container">
    <button
      class="boton-guardar"
      (click)="abrirModal()"
      [disabled]="!(user$ | async)">
      CREAR POLLA
    </button>
  </div>

  <!-- Modal, solo se muestra si `modalAbierto` es `true` -->
  <app-crear-polla
    *ngIf="modalAbierto"
    (modalCerrado)="onModalCerrado()">
</app-crear-polla>
</div>

<app-pronosticos *ngIf="mostrarPronostico"></app-pronosticos>
<app-posiciones *ngIf="mostrarPosiciones"></app-posiciones>
